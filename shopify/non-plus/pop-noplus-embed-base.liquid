<script>
  window.POP_EMBED_CONFIG = {
    // Mode: 'sdi' (Italy, PEC/SDI and Tax Code for private) or 'peppol' (EU, no PEC/SDI).
    mode: 'sdi',
    // Scope: 'b2b' forces company; 'b2b+b2c' shows the selector (private/company/freelance).
    scope: 'b2b+b2c',
    // Container on the cart page:
    cartContainerSelector: '.cart__blocks',
    // Drawer containers (only outside /cart):
    drawerContainers: [
      { selector: '.drawer__footer', insertMode: 'prepend' }
    ],
    // Position relative to the cart container: append | prepend | before | after
    insertMode: 'prepend',
    // Select options (order or limit values; default: private, company, freelance)
    customerOptions: ['private','company','freelance'],
    // Select name (leave as is if you don't need to change it)
    selectName: 'attributes[pop_customer_type]',
    // Optional toggle to show/hide fields
    toggle: { enabled: true, label: 'Add billing details' },
    // Inline prefill (cart.attributes first, then customer metafields)
    prefill: {
      customerType: '{{ cart.attributes.pop_customer_type
        | default: customer.metafields.app.pop_customer_type
        | default: "private"
        | escape }}',
      vat: '{{ cart.attributes.pop_vat
        | default: customer.metafields.app.pop_vat
        | default: ""
        | escape }}',
      taxCode: '{{ cart.attributes.pop_tax_code
        | default: customer.metafields.app.pop_tax_code
        | default: ""
        | escape }}',
      pec: '{{ cart.attributes.pop_pec
        | default: customer.metafields.app.pop_pec
        | default: ""
        | escape }}'
    }
  };
</script>
<script defer src="https://pub.popapi.io/shopify/scripts/pop-noplus-embed.min.js"></script>
